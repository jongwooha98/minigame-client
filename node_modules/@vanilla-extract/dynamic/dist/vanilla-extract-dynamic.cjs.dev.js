'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _private = require('@vanilla-extract/private');

function assignInlineVars(varsOrContract, tokens) {
  const styles = {};

  if (typeof tokens === 'object') {
    const contract = varsOrContract;
    _private.walkObject(tokens, (value, path) => {
      const varName = _private.get(contract, path);
      styles[_private.getVarName(varName)] = String(value);
    });
  } else {
    const vars = varsOrContract;

    for (const varName in vars) {
      styles[_private.getVarName(varName)] = vars[varName];
    }
  }

  Object.defineProperty(styles, 'toString', {
    value: function () {
      return Object.keys(this).map(key => `${key}:${this[key]}`).join(';');
    },
    writable: false
  });
  return styles;
}

function setVar(element, variable, value) {
  element.style.setProperty(_private.getVarName(variable), value);
}

function setElementVars(element, varsOrContract, tokens) {
  if (typeof tokens === 'object') {
    const contract = varsOrContract;
    _private.walkObject(tokens, (value, path) => {
      setVar(element, _private.get(contract, path), String(value));
    });
  } else {
    const vars = varsOrContract;

    for (const varName in vars) {
      setVar(element, varName, vars[varName]);
    }
  }
}

exports.assignInlineVars = assignInlineVars;
exports.setElementVars = setElementVars;
